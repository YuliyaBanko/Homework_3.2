# Проект "Тестирование функции поиска студента для массивов с различными данными"

## Задача
Студенты получают дополнительные баллы за успешное и быстрое завершение практической работы. Необходимо вычислить студентов с максимальными баллами из набора данных. Мы разработали функцию, которая определяет студента с наивысшим баллом и выводит поздравление. Также нужно измерить покрытие тестами и добиться 100% по веткам и строкам.

Пример трех наборов тестовых данных можно найти [здесь](https://drive.google.com/file/d/1q63tCl_86YHxPJ_SGy085YimrrY-7Kw_/view?usp=sharing).

---

## Решение

### 1. Инициализация Node.js проекта

## Установка и настройка

**1. Инициализация проекта:**
В терминале выполните следующую команду для создания нового проекта Node.js:

```
npm init -y
```

Это создаст файл `package.json` с настройками проекта.

**2. Редактирование `package.json`:**
Откройте `package.json` и добавьте следующую информацию о проекте:

```json
{
  "name": "имя-проекта",
  "version": "1.0.0",
  "description": "Описание вашего проекта",
  "main": "index.js",
  "scripts": {
    "test": "jest"
  },
  "author": "Ваше Имя",
  "repository": {
    "type": "git",
    "url": "https://github.com/ваш-логин/ваш-репозиторий.git"
  },
  "license": "MIT"
}
```

**3. Создание `.gitignore`:**
Создайте файл `.gitignore` в корневом каталоге вашего проекта и добавьте следующие строки, чтобы исключить ненужные файлы и папки из репозитория:

```
node_modules/
.env
*.log
```

---

### 2. Написание функции

Функция `findBestStudent` принимает список студентов с их баллами и датами сдачи и находит студента (или студентов), которые получили наивысший балл. Если несколько студентов получили одинаковый максимальный балл, выбирается тот, кто сдал раньше.

#### Как работает функция:

**Инициализация переменных:**
- `maxScore`: начальное значение максимального балла (установлено в -Infinity).
- `earliestDate`: переменная для хранения самой ранней даты (начально null).
- `bestStudents`: массив для хранения имен студентов с наивысшими баллами (начально пустой).

**Перебор студентов:**
Функция проходит через каждого студента в списке `groupsStudents`:
- Получение даты: Для каждого студента создается объект даты на основе его даты сдачи.
- Сравнение баллов:
  - Если балл студента больше, чем текущий максимальный (`maxScore`):
    - Обновляем `maxScore` новым баллом.
    - Устанавливаем `earliestDate` на дату текущего студента.
    - Обнуляем массив `bestStudents` и добавляем имя этого студента.
  - Если балл студента равен `maxScore`:
    - Если дата студента раньше, чем `earliestDate`, обновляем `earliestDate` и меняем `bestStudents`.
    - Если дата такая же, как `earliestDate`, добавляем имя студента в `bestStudents`.

**Проверка на нулевые баллы:**
Если `maxScore` остается равным 0 (это значит, что у всех студентов нулевые баллы), выводим сообщение "Все на пересдачу, неучи!!!" и возвращаем пустой массив.

**Вывод результатов:**
Если найдены студенты с наивысшим баллом, выводим поздравление с их именами и возвращаем массив с именами лучших студентов.

---

### 3. Написание тестов

Для тестирования функции `findBestStudent` необходимо установить Jest и плагин для проверки покрытия `babel-plugin-istanbul`.

**1. Установка Jest:**

```
npm install --save-dev jest
```

**2. Настройка Jest coverage:**

```
npm install --save-dev babel-plugin-istanbul
```

#### Структура тестов

Тесты проверяют, правильно ли функция определяет студентов с наивысшими баллами из различных групп. Каждый тест включает входные данные (группы студентов) и ожидаемый результат. Тесты делятся на позитивные и негативные.

**Параметрические тесты:**
В дополнение к индивидуальным тестам мы используем параметрические тесты для проверки функции `findBestStudent` с различными наборами данных. Эти тесты позволяют нам упростить проверку, используя один набор тестов с множеством входных данных и ожидаемых результатов:

```javascript
it.each([
    [studentGroups[0], ["Ivan"]], 
    [studentGroups[1], ["Marina"]],
    [studentGroups[2], []], 
    [studentGroups[3], ["Olga", "Vasily"]],
    [studentGroups[0], ["Denis"]], 
    [studentGroups[1], ["Lena"]],
    [studentGroups[2], ["Anna"]], 
    [studentGroups[3], []],
])("best student scores", (testData, result) => {
    expect(findBestStudent(testData)).toEqual(result);
});
```

---

### 4. Проверка покрытия

#### Анализ покрытия

Была проведена проверка покрытия тестами для функции `findBestStudent` с помощью `babel-plugin-istanbul`, чтобы понять, насколько хорошо наши тесты охватывают код. Основная цель — убедиться, что все важные части логики протестированы и работают корректно.

**Измеряемые показатели:**
- `% Stmts (Строки)`: Процент исполняемых строк кода, покрытых тестами.
- `% Branch (Ветвления)`: Процент условий (ветвлений), протестированных тестами.
- `% Funcs (Функции)`: Процент функций, вызванных в тестах.
- `% Lines (Строки)`: Процент всех строк кода, охваченных тестами.

**Результаты:**
По итогам проверки покрытие кода показало следующие результаты:

| Показатель | Значение |
|-------------|----------|
| % Stmts     | 100%     |
| % Branch    | 100%     |
| % Funcs     | 100%     |
| % Lines     | 100%     |

Файл `BestStudentScores.js` также продемонстрировал 100% покрытие по всем показателям.

---

**Покрытие строк (lines)**:
   Покрытие строк указывает, какой процент строк кода был выполнен во время тестирования.
   Оно показывает, насколько хорошо тесты охватывают код. В нашем случае это 100%. 

 **Покрытие веток (branches)**:
   Покрытие веток измеряет процент условных операторов (в нашем случае, `if`), которые были проверены тестами.
   Оно важно для гарантии того, что все возможные пути выполнения кода были протестированы. Высокое покрытие веток помогает избежать логических ошибок в условиях. В нашем случае это 100%.

**Покрытие функций (functions)**:
    Покрытие функций указывает, сколько функций было вызвано в процессе тестирования.
    Это важно для уверенности в том, что все ключевые функции программы функционируют правильно. Непокрытые функции могут означать, что важная логика не была протестирована. В нашем случае это 100%.
    
### Выводы
Общее покрытие: 100% покрытие кода означает, что каждый аспект логики функции `findBestStudent` был протестирован, что снижает риск возникновения ошибок в будущем. Высокий уровень покрытия свидетельствует о том, что любые изменения или дополнения в коде будут иметь защиту от возможных регрессий.